<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-vend-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-vend.png">
  <title>Kande VendTech ‚Äî Operations Platform</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #f5f7fa; --card: #ffffff; --border: #e2e8f0; --text: #1a202c;
      --muted: #718096; --accent: #3182ce; --hot: #e53e3e; --warn: #dd6b20;
      --success: #38a169; --purple: #7b2cbf;
    }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
    .app { max-width: 1400px; margin: 0 auto; padding: 20px; }

    /* Nav */
    .top-nav { display: flex; align-items: center; gap: 12px; margin-bottom: 32px; flex-wrap: wrap; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
    .top-nav .logo { height: 40px; }
    .top-nav a { color: var(--muted); text-decoration: none; font-size: 0.85rem; font-weight: 500; padding: 6px 12px; border-radius: 6px; transition: all 0.2s; }
    .top-nav a:hover, .top-nav a.active { color: var(--accent); background: rgba(49,130,206,0.08); }
    .nav-spacer { flex: 1; }
    .nav-brand { font-size: 0.9rem; font-weight: 600; color: var(--text); margin-right: 8px; }

    /* Hero */
    .hero { text-align: center; margin-bottom: 40px; }
    .hero h1 { font-size: 2rem; font-weight: 700; background: linear-gradient(90deg, var(--accent), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px; }
    .hero p { color: var(--muted); font-size: 1rem; }

    /* Health Bar */
    .health-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 32px; }
    .health-card { background: var(--card); border-radius: 12px; padding: 18px; border: 1px solid var(--border); text-align: center; transition: transform 0.2s; }
    .health-card:hover { transform: translateY(-2px); }
    .health-card .value { font-size: 2rem; font-weight: 700; }
    .health-card .label { font-size: 0.75rem; color: var(--muted); margin-top: 4px; text-transform: uppercase; font-weight: 600; }
    .value.accent { color: var(--accent); }
    .value.success { color: var(--success); }
    .value.warn { color: var(--warn); }
    .value.hot { color: var(--hot); }

    /* Modules Grid */
    .section-title { font-size: 1.3rem; font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
    .section-title::after { content: ''; flex: 1; height: 1px; background: var(--border); }

    .modules-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 16px; margin-bottom: 40px; }

    .module-card { background: var(--card); border-radius: 12px; padding: 20px; border: 1px solid var(--border); transition: all 0.2s; display: flex; flex-direction: column; text-decoration: none; color: var(--text); }
    .module-card:hover { border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(49,130,206,0.1); }
    .module-card.disabled { opacity: 0.6; pointer-events: none; }

    .module-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
    .module-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; flex-shrink: 0; }
    .module-info { flex: 1; }
    .module-title { font-size: 1.05rem; font-weight: 600; }
    .module-sub { font-size: 0.8rem; color: var(--muted); }

    .module-status { padding: 3px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
    .status-live { background: rgba(56,161,105,0.15); color: var(--success); }
    .status-planned { background: rgba(221,107,32,0.15); color: var(--warn); }

    .module-desc { font-size: 0.85rem; color: var(--muted); line-height: 1.5; flex: 1; }

    .module-stats { display: flex; gap: 16px; margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); }
    .module-stat { font-size: 0.85rem; }
    .module-stat strong { color: var(--accent); }

    /* Quick Actions */
    .quick-actions { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 40px; }
    .quick-action { display: flex; align-items: center; gap: 8px; padding: 12px 20px; background: var(--card); border: 1px solid var(--border); border-radius: 10px; text-decoration: none; color: var(--text); font-size: 0.9rem; font-weight: 500; transition: all 0.2s; }
    .quick-action:hover { border-color: var(--accent); background: rgba(49,130,206,0.04); }
    .quick-action .qa-icon { font-size: 1.2rem; }

    /* Icon colors */
    .icon-sales { background: linear-gradient(135deg, #ff5722, #bf360c); }
    .icon-crm { background: linear-gradient(135deg, #673ab7, #4527a0); }
    .icon-machines { background: linear-gradient(135deg, #2196f3, #1565c0); }
    .icon-inventory { background: linear-gradient(135deg, #4caf50, #2e7d32); }
    .icon-finance { background: linear-gradient(135deg, #ff9800, #e65100); }
    .icon-restock { background: linear-gradient(135deg, #00bcd4, #00838f); }
    .icon-routes { background: linear-gradient(135deg, #9c27b0, #6a1b9a); }
    .icon-seo { background: linear-gradient(135deg, #607d8b, #37474f); }
    .icon-playbook { background: linear-gradient(135deg, #e91e63, #ad1457); }
    .icon-pipeline { background: linear-gradient(135deg, #795548, #4e342e); }

    /* Phase Indicator */
    .phase-bar { background: var(--card); border-radius: 12px; padding: 20px; border: 1px solid var(--border); margin-bottom: 40px; }
    .phase-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .phase-header h3 { font-size: 1.1rem; }
    .phase-track { display: flex; gap: 4px; }
    .phase-dot { width: 100%; height: 8px; border-radius: 4px; background: var(--border); flex: 1; }
    .phase-dot.active { background: var(--accent); }
    .phase-dot.current { background: var(--success); animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .phase-labels { display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.75rem; color: var(--muted); }

    footer { text-align: center; padding: 30px; color: var(--muted); font-size: 0.85rem; }
    footer a { color: var(--accent); text-decoration: none; }

    @media (max-width: 768px) {
      .health-grid { grid-template-columns: repeat(2, 1fr); }
      .modules-grid { grid-template-columns: 1fr; }
      .hero h1 { font-size: 1.5rem; }
    }
  </style>
</head>
<body>
  <div class="app">
    <nav class="top-nav">
      <a href="/"><img src="/logo.png" alt="Kande VendTech" class="logo"></a>
      <span class="nav-brand">Operations</span>
      <a href="/" class="active">Dashboard</a>
      <a href="/crm">CRM</a>
      <a href="/machines">Machines</a>
      <a href="/inventory">Inventory</a>
      <a href="/finance">Finance</a>
      <a href="/restock">Restock</a>
      <a href="/staff">Staff</a>
      <a href="/clients">Clients</a>
      <a href="/map">Map</a>
      <a href="/performance">Performance</a>
      <a href="/planogram">Planogram</a>
      <a href="/ai-office">AI Office</a>
      <a href="/strategy.html">Strategy</a>
    </nav>

    <div class="hero">
      <h1>Kande VendTech Operations</h1>
      <p>Smart vending management ‚Äî sales to service, all in one place</p>
    </div>

    <!-- Live Stats -->
    <div class="health-grid" id="health-grid">
      <div class="health-card"><div class="value accent">‚Äî</div><div class="label">Prospects</div></div>
      <div class="health-card"><div class="value success">‚Äî</div><div class="label">Machines</div></div>
      <div class="health-card"><div class="value warn">‚Äî</div><div class="label">Deployed</div></div>
      <div class="health-card"><div class="value accent">‚Äî</div><div class="label">Locations</div></div>
      <div class="health-card"><div class="value success">‚Äî</div><div class="label">Products</div></div>
      <div class="health-card"><div class="value accent">‚Äî</div><div class="label">Month Revenue</div></div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <a href="/crm" class="quick-action"><span class="qa-icon">üéØ</span> Add Prospect</a>
      <a href="/machines" class="quick-action"><span class="qa-icon">üè≠</span> Add Machine</a>
      <a href="/restock" class="quick-action"><span class="qa-icon">üìã</span> New Restock</a>
      <a href="/finance" class="quick-action"><span class="qa-icon">üí∞</span> Log Revenue</a>
      <a href="/inventory" class="quick-action"><span class="qa-icon">üì¶</span> Add Product</a>
      <a href="/map" class="quick-action"><span class="qa-icon">üó∫Ô∏è</span> View Map</a>
      <a href="/performance" class="quick-action"><span class="qa-icon">üìä</span> Performance</a>
      <a href="/planogram" class="quick-action"><span class="qa-icon">üé∞</span> Planogram</a>
    </div>

    <!-- Phase Progress -->
    <div class="phase-bar">
      <div class="phase-header">
        <h3>üìà Growth Phase</h3>
        <span style="font-size:0.9rem;color:var(--accent);font-weight:600;">Phase 1: Launch & Blitz</span>
      </div>
      <div class="phase-track">
        <div class="phase-dot current"></div>
        <div class="phase-dot"></div>
        <div class="phase-dot"></div>
        <div class="phase-dot"></div>
      </div>
      <div class="phase-labels">
        <span>Launch & Blitz</span>
        <span>Systems + Warehouse</span>
        <span>Ops Manager</span>
        <span>Scale to $75K+/mo</span>
      </div>
    </div>

    <!-- Core Modules -->
    <h2 class="section-title">System Modules</h2>
    <div class="modules-grid">

      <a href="/crm" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-sales">üéØ</div>
          <div class="module-info">
            <div class="module-title">Sales CRM</div>
            <div class="module-sub">Prospect tracking & outreach</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Track prospects, log activities, manage contacts. Full pipeline from cold outreach to signed deal.</div>
        <div class="module-stats" id="crm-stats">
          <span class="module-stat"><strong id="stat-prospects">‚Äî</strong> prospects</span>
          <span class="module-stat"><strong id="stat-hot">‚Äî</strong> hot leads</span>
          <span class="module-stat"><strong id="stat-signed">‚Äî</strong> signed</span>
        </div>
      </a>

      <a href="/machines" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-machines">üè≠</div>
          <div class="module-info">
            <div class="module-title">Machines & Locations</div>
            <div class="module-sub">Fleet tracking & assignments</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Track machines owned, assignments, contract details, revenue share terms, and machine status.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-machines">‚Äî</strong> machines</span>
          <span class="module-stat"><strong id="stat-deployed">‚Äî</strong> deployed</span>
          <span class="module-stat"><strong id="stat-locations">‚Äî</strong> locations</span>
        </div>
      </a>

      <a href="/inventory" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-inventory">üì¶</div>
          <div class="module-info">
            <div class="module-title">Product Catalog</div>
            <div class="module-sub">Products, pricing & suppliers</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Full product catalog with cost/sell pricing, margin tracking, and supplier management. 3√ó markup rule.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-products">‚Äî</strong> products</span>
        </div>
      </a>

      <a href="/finance" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-finance">üí∞</div>
          <div class="module-info">
            <div class="module-title">Financial Dashboard</div>
            <div class="module-sub">P&L, revenue & credit tracking</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Revenue per machine, expense tracking, P&L charts, credit card tracker with 0% APR monitoring.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-revenue">‚Äî</strong> this month</span>
          <span class="module-stat"><strong id="stat-profit">‚Äî</strong> profit</span>
        </div>
      </a>

      <a href="/restock" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-restock">üìã</div>
          <div class="module-info">
            <div class="module-title">Restock Workflow</div>
            <div class="module-sub">Pick lists & delivery tracking</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Generate pick lists, track through pick ‚Üí pack ‚Üí load ‚Üí deliver ‚Üí verify workflow.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-restocks">‚Äî</strong> pending</span>
        </div>
      </a>

      <a href="/map" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-routes">üó∫Ô∏è</div>
          <div class="module-info">
            <div class="module-title">Route Planner</div>
            <div class="module-sub">Map view & route optimization</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Interactive map of all prospects and locations. Plan delivery routes within your 10-15 mile service radius.</div>
      </a>

      <a href="/staff" class="module-card">
        <div class="module-header">
          <div class="module-icon" style="background:linear-gradient(135deg,#43a047,#2e7d32);">üë•</div>
          <div class="module-info">
            <div class="module-title">Staff Management</div>
            <div class="module-sub">Team, shifts & scheduling</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Employee roster, shift tracking, weekly schedule, availability grid. Target: $3,500 per 8 labor hours.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-staff">‚Äî</strong> staff</span>
          <span class="module-stat"><strong id="stat-week-hours">‚Äî</strong> hrs/week</span>
        </div>
      </a>

      <a href="/clients" class="module-card">
        <div class="module-header">
          <div class="module-icon" style="background:linear-gradient(135deg,#ec407a,#c2185b);">ü§ù</div>
          <div class="module-info">
            <div class="module-title">Client CRM</div>
            <div class="module-sub">Signed location relationships</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Track active client relationships, touchpoints, issues, contract renewals, and client health scores.</div>
        <div class="module-stats">
          <span class="module-stat"><strong id="stat-client-count">‚Äî</strong> clients</span>
          <span class="module-stat"><strong id="stat-open-issues">‚Äî</strong> open issues</span>
        </div>
      </a>

      <a href="/pipeline.html" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-pipeline">üìä</div>
          <div class="module-info">
            <div class="module-title">Pipeline Sheet</div>
            <div class="module-sub">Spreadsheet view of prospects</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Spreadsheet-style view of your sales pipeline. Quick editing and bulk operations.</div>
      </a>

      <a href="/playbook.html" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-playbook">üìò</div>
          <div class="module-info">
            <div class="module-title">Sales Playbook</div>
            <div class="module-sub">Scripts, tactics & strategies</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Sales scripts, objection handling, the $54 rent premium pitch, and qualification checklists.</div>
      </a>

      <a href="/seo.html" class="module-card">
        <div class="module-header">
          <div class="module-icon icon-seo">üîç</div>
          <div class="module-info">
            <div class="module-title">SEO Rankings</div>
            <div class="module-sub">Search visibility tracking</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Track your Google rankings for "vending machines las vegas" and related keywords.</div>
      </a>

      <a href="/performance" class="module-card">
        <div class="module-header">
          <div class="module-icon" style="background:linear-gradient(135deg,#ff5722,#d84315);">üìä</div>
          <div class="module-info">
            <div class="module-title">Product Performance</div>
            <div class="module-sub">Sales velocity & margin analytics</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Product scoreboard, category breakdown, margin analysis, swap recommendations. Track what sells and what doesn't.</div>
      </a>

      <a href="/planogram" class="module-card">
        <div class="module-header">
          <div class="module-icon" style="background:linear-gradient(135deg,#7b1fa2,#4a148c);">üé∞</div>
          <div class="module-info">
            <div class="module-title">Planogram Editor</div>
            <div class="module-sub">Visual slot optimization</div>
          </div>
          <span class="module-status status-live">Live</span>
        </div>
        <div class="module-desc">Drag-and-drop planogram editor. Zone-coded slots, placement warnings, templates, and heatmap overlays.</div>
      </a>

    </div>

    <footer>
      <p>Kande VendTech Operations Platform v1.0 ‚Äî Built with ü§ñ</p>
      <p style="margin-top:6px;"><a href="/pricing-reference.xlsx">üìÑ Pricing Reference</a></p>
    </footer>
  </div>

  <script>
    async function loadStats() {
      try {
        const stats = await fetch('/api/stats').then(r => r.json());

        // Health grid
        const fmt = n => '$' + (n || 0).toLocaleString();
        document.getElementById('health-grid').innerHTML = `
          <div class="health-card"><div class="value accent">${stats.prospects}</div><div class="label">Prospects</div></div>
          <div class="health-card"><div class="value success">${stats.machines}</div><div class="label">Machines</div></div>
          <div class="health-card"><div class="value warn">${stats.machinesDeployed}</div><div class="label">Deployed</div></div>
          <div class="health-card"><div class="value accent">${stats.locations}</div><div class="label">Locations</div></div>
          <div class="health-card"><div class="value success">${stats.products}</div><div class="label">Products</div></div>
          <div class="health-card"><div class="value ${stats.monthRevenue > 0 ? 'success' : ''}">${fmt(stats.monthRevenue)}</div><div class="label">Month Revenue</div></div>
        `;

        // Module stats
        document.getElementById('stat-prospects').textContent = stats.prospects;
        document.getElementById('stat-hot').textContent = stats.hot;
        document.getElementById('stat-signed').textContent = stats.signed;
        document.getElementById('stat-machines').textContent = stats.machines;
        document.getElementById('stat-deployed').textContent = stats.machinesDeployed;
        document.getElementById('stat-locations').textContent = stats.locations;
        document.getElementById('stat-products').textContent = stats.products;
        document.getElementById('stat-revenue').textContent = fmt(stats.monthRevenue);
        document.getElementById('stat-profit').textContent = fmt(stats.monthProfit);
        document.getElementById('stat-restocks').textContent = stats.pendingRestocks;

        // Staff & Client stats
        if (document.getElementById('stat-staff')) document.getElementById('stat-staff').textContent = stats.activeStaff || 0;
        if (document.getElementById('stat-week-hours')) document.getElementById('stat-week-hours').textContent = (stats.weekHours || 0).toFixed(1);
        if (document.getElementById('stat-client-count')) document.getElementById('stat-client-count').textContent = stats.clientCount || 0;
        if (document.getElementById('stat-open-issues')) document.getElementById('stat-open-issues').textContent = stats.openIssues || 0;
      } catch (e) {
        console.error('Failed to load stats:', e);
      }
    }

    loadStats();
    // Refresh every 60 seconds
    setInterval(loadStats, 60000);
  </script>
<script src="/nav.js"></script>
</body>
</html>
